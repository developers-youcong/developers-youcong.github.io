---
title: 我在M2公司做架构之数据库
date: 2021-10-30 20:31:42
tags: ["架构","职业生涯","技术思考与实践"]
---

## 一、数据库定义
数据库是数据管理的有效技术，是由一批数据构成的有序集合，这些数据被存放在结构化的数据表里。数据表之间相互关联，反映客观事物间的本质联系。数据库能有效地帮助一个组织或企业科学地管理各类信息资源。
<!--more-->

数据是数据库中存储的基本对象，是按一定顺序排列组合的物理符号。数据有多种表现形式，可以是数字、文字、图像，甚至是音频或视频，它们都可以经过数字化后存入计算机。

数据库是数据的集合，具有统一的结构形式并存放于统一的存储介质内，是多种应用数据的集成，并可被各个应用程序所共享。

## 二、常见的主流数据库有哪些
- MySQL；
- SQL Server；
- Oracle；
- PostgreSQL；
- Sybase；
- DB2；
- Access。

关于这些主流数据库的详细介绍，可阅读这篇文章:
[常见的主流数据库（DBMS）](https://blog.csdn.net/gengkui9897/article/details/89294936)

## 三、以我常用的MySQL为例，安装相关
曾写过相关博文，归纳如下:
[Ubuntu16.04之开发环境构建](https://www.cnblogs.com/youcong/p/9123722.html)
[centos7之Java开发环境构建](https://www.cnblogs.com/youcong/p/9118753.html)

随着时间的流去，上面的链接涉及MySQL部分，难免有其局限性。这里我再次归纳一些通用性步骤。

### 1.上传mysql压缩包至linux服务器上(放至/usr/software目录下)

### 2.卸载自带的mysql和mariadb
```
rpm -qa | grep mariadb
rpm -qa | grep mysql

yum remove mariadb-xxx #如果有就卸载，没有忽略即可

```

### 3.解压当前目录并重命名
```
tar -zxvf mysql-5.7.x.tar.gz
mv mysql-5.7.x mysql
```

### 4.添加MySQL用户并授权
```
useradd -s /bin/false -M mysql
chown -R mysql:mysql mysql

```

### 5.修改my.cnf配置文件(vim /etc/my.cnf，如果没有vim可yum install vim 进行安装)
```
[mysql]
#修改默认字符集
default-character-set=utf8
#这个是绑定客户端socket文件路径，不然出错还要创建
socket=/usr/software/mysql/mysql.sockt
[mysqld]
#用于后续修改密码时，如果随机密码不对，可以跳过密码验证登录的，修改完密码后再删
掉。
#skip-grant-tables
socket=/usr/software/mysql/mysql.sockt
log_error=/usr/software/mysql/data/error.log
pid_file=/usr/software/mysql/data/mysql.pid
basedir=/usr/software/mysql
datadir=/usr/software/mysql/data
port = 3306
#忽略大小写
lower_case_table_names=0
#服务端默认字符集
character-set-server=utf8
#最大连接数
max_connections=1500
#创建数据库时默认数据引擎
default-storage-engine=INNODB
explicit_defaults_for_timestamp=true
#开启event
event_scheduler=ON
#结果字符拼接长度设置
group_concat_max_len=204800

```

### 6.初始化MySQL
```
bin/mysqld --initialize --user=mysql --basedir=/usr/software/mysql --datadir=/usr/software/mysql/data

```

### 7.拷贝启动程序，将mysql的启动程序拷贝到/etc/init.d/目录下
```
cp /usr/software/mysql/support-files/mysql.server /etc/init.d/mysqld


```

### 8.启动MySQL
```
service mysqld start

```

### 9.配置环境变量(vim /etc/profile,内容添加到最后一行)
```
#mysql
export MYSQL_HOME=/usr/software/mysql
export PATH=$PATH:$MYSQL_HOME/bin

```

添加完后，需执行如下命令，让环境变量生效:
```
source /etc/profile

```

### 10.常用命令
```
service mysqld start 　　　 #启动
service mysqld stop        #关闭 　　　
service mysqld restart　　  #重启 　　　
service mysqld status 　　  #查看运行状态 

```

## 四、2021年基于数据库的一些教训和思考
这是我今年写的一些比较有深度的文章，感兴趣的朋友可以阅读:
[数据库被删之反思](https://youcongtech.com/2021/05/22/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A2%AB%E5%88%A0%E4%B9%8B%E5%8F%8D%E6%80%9D/)
[数据库设计之思考](https://youcongtech.com/2021/06/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B9%8B%E6%80%9D%E8%80%83/)
[Linux设备上没有空间之复盘](https://youcongtech.com/2021/01/04/Linux%E8%AE%BE%E5%A4%87%E4%B8%8A%E6%B2%A1%E6%9C%89%E7%A9%BA%E9%97%B4%E4%B9%8B%E5%A4%8D%E7%9B%98/)
[数据表设计之主键自增、UUID或联合主键](https://youcongtech.com/2021/03/25/%E6%95%B0%E6%8D%AE%E8%A1%A8%E8%AE%BE%E8%AE%A1%E4%B9%8B%E4%B8%BB%E9%94%AE%E8%87%AA%E5%A2%9E%E3%80%81UUID%E6%88%96%E8%81%94%E5%90%88%E4%B8%BB%E9%94%AE/)

## 五、MySQL数据库一些问题及其解决方案
这是我过去写的关于MySQL相关问题解决方案、学习等相关文章，感兴趣的朋友可以阅读:
[数据库时间与系统时间不同步问题之解决](https://youcongtech.com/2021/06/20/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%97%B6%E9%97%B4%E4%B8%8E%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4%E4%B8%8D%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98%E4%B9%8B%E8%A7%A3%E5%86%B3/)

[mysqld: error while loading shared libraries: libaio.so.1](https://youcongtech.com/2021/06/20/mysqld-error-while-loading-shared-libraries-libaio-so-1/)

[MySQL之集群配置](https://youcongtech.com/2021/02/21/MySQL%E4%B9%8B%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/)

[Error Code: 1153 - Got a packet bigger than 'max_allowed_packet' bytes](https://youcongtech.com/2021/02/06/Error-Code-1153-Got-a-packet-bigger-than-max-allowed-packet-bytes/)

[nginx之MySQL代理](https://youcongtech.com/2021/01/22/nginx%E4%B9%8BMySQL%E4%BB%A3%E7%90%86/)

[mysql快速插入数据三种方法](https://youcongtech.com/2021/01/18/mysql%E5%BF%AB%E9%80%9F%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95/)

[ERROR 1006 (HY000): Can't create database](https://youcongtech.com/2021/01/11/ERROR-1006-HY000-Can-t-create-database/)

[mysql出现unblock with 'mysqladmin flush-hosts'](https://youcongtech.com/2020/09/30/mysql%E5%87%BA%E7%8E%B0unblock-with-mysqladmin-flush-hosts/)

[SQL优化之博客案例](https://youcongtech.com/2020/07/26/SQL%E4%BC%98%E5%8C%96%E4%B9%8B%E5%8D%9A%E5%AE%A2%E6%A1%88%E4%BE%8B/)

[MySQL体系结构和存储引擎](https://youcongtech.com/2020/05/29/MySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%92%8C%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/)

[MySQL日期字符串转换](https://youcongtech.com/2020/03/22/MySQL%E6%97%A5%E6%9C%9F%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2/)

[attempted to return null from a method with a primitive return type (int).](https://youcongtech.com/2020/02/28/attempted-to-return-null-from-a-method-with-a-primitive-return-type-int/)

[mysql查询结果多列拼接查询](https://youcongtech.com/2020/02/08/mysql%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E5%A4%9A%E5%88%97%E6%8B%BC%E6%8E%A5%E6%9F%A5%E8%AF%A2/)

[《高性能MySQL》之EXPLAIN](https://youcongtech.com/2020/02/02/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDMySQL%E3%80%8B%E4%B9%8BEXPLAIN/)

[《高性能MySQL》之MySQL查询性能优化](https://youcongtech.com/2020/02/02/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDMySQL%E3%80%8B%E4%B9%8BMySQL%E6%9F%A5%E8%AF%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/)

[MySQL之replace函数应用](https://youcongtech.com/2019/07/31/MySQL%E4%B9%8Breplace%E5%87%BD%E6%95%B0%E5%BA%94%E7%94%A8/)

[XAMPP启动mysql遇到的问题](https://youcongtech.com/2019/06/12/XAMPP%E5%90%AF%E5%8A%A8mysql%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/)

[MySQL5.7授权用户远程访问](https://youcongtech.com/2019/05/15/MySQL5-7%E6%8E%88%E6%9D%83%E7%94%A8%E6%88%B7%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/)

[Ubuntu16.04忘记MySQL5.7的root用户密码之解决方案](https://youcongtech.com/2019/05/07/Ubuntu16-04%E5%BF%98%E8%AE%B0MySQL5-7%E7%9A%84root%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81%E4%B9%8B%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/)

[请在mysql配置文件修sql-mode或sql_mode为NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION](https://youcongtech.com/2019/05/06/%E8%AF%B7%E5%9C%A8mysql%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BF%AEsql-mode%E6%88%96sql-mode%E4%B8%BANO-AUTO-CREATE-USER-NO-ENGINE-SUBSTITUTION/)

[使用sqlyog连接 Mysql 出现1251错误](https://youcongtech.com/2019/05/02/%E4%BD%BF%E7%94%A8sqlyog%E8%BF%9E%E6%8E%A5-Mysql-%E5%87%BA%E7%8E%B01251%E9%94%99%E8%AF%AF/)

[The server time zone value 'ÖÐ¹ú±ê×¼Ê±¼ä' is unrecognized or represents more than one time zone.](https://youcongtech.com/2019/05/01/The-server-time-zone-value-O%C3%90%C2%B9u%C2%B1e%C3%97%C2%BCE%C2%B1%C2%BCa-is-unrecognized-or-represents-more-than-one-time-zone/)

[ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.](https://youcongtech.com/2019/04/23/ERROR-1820-HY000-You-must-reset-your-password-using-ALTER-USER-statement-before-executing-this-statement/)

[MySQL去除查询结果重复](https://youcongtech.com/2019/03/29/MySQL%E5%8E%BB%E9%99%A4%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E9%87%8D%E5%A4%8D/)

[MySQL备份命令](https://youcongtech.com/2019/03/21/mysql%E5%A4%87%E4%BB%BD%E5%91%BD%E4%BB%A4/)