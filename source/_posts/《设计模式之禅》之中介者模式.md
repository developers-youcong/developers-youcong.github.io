---
title: 《设计模式之禅》之中介者模式
date: 2020-01-05 15:41:10
tags: "读书笔记"
---
## 一、中介者模式的定义
用一个中介对象封装一系列的对象交互，中介者使各对象不需要显示地相互作用，从而使其耦合松散，而且可以独立地改变它们之间的交互。

中介者模式主要由以下几个部分组成:
<!--more-->
### 1.Mediator 抽象中介者角色
抽象中介者角色定义统一的接口，用于各同事角色之间的通信.


### 2.Concreate Mediator 具体中介者角色
具体中介者角色通过协调各同事角色实现协作行为，因此它必须依赖于各个同事角色

### 3.Colleague 同事角色
每一个同事角色都知道中介者角色，而且与其他的同事角色通信的时候，一定要通过中介者角色协作。每个同事类的行为分为两种:

一种是同事本身的行为，比如改变对象本身的状态，处理自己的行为等，这种行为叫做自发行为，与其他的同事类或中介者没有任何的依赖;

第二种是必须依赖中介者才能完成的行为，叫做依赖方法。


## 二、中介者模式的应用

### 1.中介者模式的优点
中介者模式的优点就是减少类间的依赖，把原有的一对多的依赖变成一对一的依赖，同事类只依赖中介者，减少了依赖，当然同时也降低了类间的耦合。

### 2.中介者模式的缺点
中介者模式的缺点就是中介者会膨胀得很大，而且逻辑复杂，原本N个对象直接的相互依赖关系转换为中介者和同事类的依赖关系，同事类越多，中介者的逻辑就越复杂。

### 3.中介者模式的使用场景
中介者适用于多个对象之间紧密耦合的情况。

紧密耦合的标准是:在类图中出现了蜘蛛网状结构。在这种情况下一定要考虑使用中介者模式，这有利于把蜘蛛网梳理为星型结构，使原本复杂混乱的关系变得清晰简单。


## 三、中介者模式的实际应用
中介者模式也叫做调停者模式，是什么意思呢？一个对象要和N多个对象交流，就像对象间的战争，很混乱。这时，需要加入一个中心，所有的类都和中心交流，中心说怎么处理就怎么处理。

例子列举:

### 1.机场调度中心

### 2.MVC框架

### 3.媒体网关

### 4.中介服务



## 四、最佳实践

如下情况可尝试使用中介者模式:
- N个对象之间产生了相互的依赖关系(N>2)
- 多个对象有依赖关系，但是依赖的行为尚不确定或者有发生改变的可能，在这种情况下一般建议采用中介者模式，降低变更引起的风险扩散。
- 产品开发。一个明显的例子就是MVC框架，把中介者模式应用到产品中，可以提升产品的性能和扩展性，但是对于项目开发就未必，因为项目是以交付投产为目标，而产品则以稳定、高效、扩展为宗旨。

代码例子，已放到我个人GitHub:
https://github.com/developers-youcong/DesignPatternPractice/tree/master/Mediator
