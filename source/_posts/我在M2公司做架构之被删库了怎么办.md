---
title: 我在M2公司做架构之被删库了怎么办
date: 2022-04-10 11:29:32
tags: ["架构","职业生涯","技术思考与实践"]
---
去年写过一篇文章[数据库被删之反思](https://youcongtech.com/2021/05/22/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A2%AB%E5%88%A0%E4%B9%8B%E5%8F%8D%E6%80%9D/)。

从那以后，也有人不经意间犯了一些错误导致数据库数据丢失或被覆盖这样的情况，这些情况的严重性有些时候与删库是一样的。为此该如何解决呢？
<!--more-->

首先我在[数据库被删之反思](https://youcongtech.com/2021/05/22/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A2%AB%E5%88%A0%E4%B9%8B%E5%8F%8D%E6%80%9D/)这篇文章中提到的解决方案仍然适用。不过我在此基础上还要增加一些条条框框:

- 1.生产数据录入，录入前，必须做好备份，以防录入过程中可能会出现的一些问题；
- 2.数据录入最好以sql文件的形式而非程序；
- 3.定期快照；
- 4.数据录入前，中间涉及的某些程序自动化数据录入最好隔离开或者是自动化地录入中要有自动备份机制(防止过程有问题，可以暂停，待其它数据录入成功后，自动恢复)；
- 5.生产数据库的完整权限应该控制在屈指可数的人知道，不同的岗位，数据库的账号以及账号权限不一样，精细化控制。