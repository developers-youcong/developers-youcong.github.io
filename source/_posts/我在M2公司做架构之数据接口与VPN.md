---
title: 我在M2公司做架构之数据接口与VPN
date: 2022-01-08 22:05:03
tags: ["架构","职业生涯","技术思考与实践"]
---

也许有朋友疑问数据接口与VPN有何关联呢？那么先来看下VPN的定义，什么是VPN？
<!--more-->
> 虚拟专用网络(VPN)是一门新型的网络技术，它为我们提供了一种通过公用网络(如最大的公用因特网)安全地对企业内部专用网络进行远程访问的连接方式。我们知道一个网络连接通常由三个部分组成：客户机、传输介质和服务器。VPN网络同样也需要这三部分，不同的是VPN连接不是采用物理的传输介质，而是使用一种称之为“隧道”的东西来作为传输介质的，这个隧道是建立在公共网络或专用网络基础之上的，如因特网或专用Intranet等。同时要实现VPN连接，企业内部网络中必须配置有一台基于Windows NT或Windows2000 Server(目前Windows系统是最为普及，也是对VPN技术支持最为全面的一种操作系统)的VPN服务器，VPN服务器一方面连接企业内部专用网络(LAN)，另一方面要连接到因特网或其它专用网络，这就要VPN服务器必须拥有一个公用的IP地址，也就是说企业必须先拥有一个合法的Internet或专用网域名。当客户机通过VPN连接与专用网络中的计算机进行通信时，先由NSP(网络服务提供商)将所有的数据传送到VPN服务器，然后再由VPN服务器将所有的数据传送到目标计算机。因为在VPN隧道中通信能确保通信通道的专用性，并且传输的数据是经过压缩、加密的，所以VPN通信同样具有专用网络的通信安全性。

## VPN的通信流程主要包含几个步骤？

- (1)客户机向VPN服务器发出请求；
- (2)VPN服务器响应请求并向客户机发出身份质询，客户机将加密的用户身份验证响应信息发送到VPN服务器；
- (3) VPN服务器根据用户数据库检查该响应，如果账户有效，VPN服务器将检查该用户是否具有远程访问权限；如果该用户拥有远程访问的权限，VPN服务器接受此连接；
- (4)最后VPN服务器将在身份验证过程中产生的客户机和服务器公有密钥将用来对数据进行加密，然后通过VPN隧道技术进行封装、加密、传输到目的内部网络。

## 那么数据接口与VPN有什么关系呢？
这里从VPN的优势出发，VPN具有如下的优势:

- (1)节约成本；
- (2)增强安全性；
- (3)网络协议支持；
- (4)易扩展；
- (5)可随意与合作伙伴联网；
- (6)完全控制主动权；
- (7)安全的IP地址；
- (8)支持新兴应用。

数据接口不论是内网还是外网环境，安全性是首要的考量。不论是内网环境还是外网环境下可能面临一些网络攻击(如DOS攻击、DDOS攻击、CSRF攻击、API接口攻击、SQL注入等之类的)，毕竟黑客的攻击无处不在，通过数据接口与VPN关联，确保只有在连接VPN的前提下，数据接口服务才能顺利请求并给予响应。这样一来，能够有效提高系统的安全性，避免大多数情况下的网络攻击。这也就是为什么一些公司做对外数据接口服务或者是对外数据库时，为什么要加上必须连接VPN才能访问对应服务的重要原因(尽管有了相应的token或数据库账号密码，但如果没有连接VPN的话，还是不能获取对应的数据服务)。

文章参考资料:
[网络管理员入门 虚拟专用网VPN基础知识](http://it.enorth.com.cn/system/2006/06/01/001319979.shtml)