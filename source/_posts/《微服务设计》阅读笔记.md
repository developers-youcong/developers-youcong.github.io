---
title: 《微服务设计》阅读笔记
date: 2020-01-28 17:54:43
tags: "读书笔记"
---

## 一、微服务
<!--more-->
### 1.什么是微服务

#### a.很小，专注于做好一件事情

#### b.自治性

### 2.主要好处

#### a.技术异构性

#### b.弹性

#### c.扩展

#### d.简化部署

#### e.与组织结构相匹配

#### d.对可替代性的优化

### 3.面向服务的架构

### 4.其他分解技术

#### a.共享库

#### b.模块

### 4.没有银弹


## 二、演化式架构师

### 1.不准确的比较

### 2.架构师的演化视角

### 3.分区

### 4.一个原则性的方法

#### a.战略目标

#### b.原则

#### c.实践

#### d.将原则和实践相结合

#### e.真实世界的例子

### 5.要求的标准

#### a.监控

#### b.接口

#### c.架构安全性

### 6.代码治理

#### a.范例

#### b.裁剪服务代码模板


### 7.技术债务

### 8.例外管理

### 9.集中治理和领导

### 10.建设团队


## 三、如何建模服务

### 1.MusicCorp简介

### 2.什么样的服务是好服务

#### a.松耦合

#### b.高内聚

### 3.限界上下文

#### a.共享的隐藏模型

#### b.模块和服务

#### c.过早划分

### 4.业务功能

### 5.逐步划分上下文

### 6.关于业务概念的沟通

### 7.技术边界

## 四、集成

### 1.寻找理想的集成技术

#### a.避免破坏性修改

#### b.保证API的技术无关性

#### c.使你的服务易于消费方使用

#### d.隐藏内部实现细节

### 2.为用户创建接口


### 3.共享数据库

### 4.同步与异步

### 5.编排与协同

### 6.远程过程调用

#### a.技术的耦合

#### b.本地调用和远程调用并不相同

#### c.脆弱性

#### d.RPC很糟糕吗

### 7.REST

#### a.REST和HTTP

#### b.超媒体作为程序状态的引擎

#### c.JSON、XML还是其他

#### d.留心过多的约定

#### e.基于HTTP的REST的缺点

### 8.实现基于事件的异步协作方式

#### a.技术选择

#### b.异步架构的复杂性


### 9.服务即状态机

### 10.响应式扩展

### 11.微服务世界中的DRY和代码重用的危险

### 12.按引用访问

### 13.版本管理

#### a.尽可能推迟

#### b.及早发现破坏性修改

#### c.使用语义化的版本管理

#### d.不同的接口共存

#### e.同时使用多个版本的服务

### 14.用户界面

#### a.走向数字化

#### b.约束

#### c.API组合

#### d.UI片段的组合

#### e.一种混合方式

### 15.与第三方软件集成

#### a.缺乏控制

#### b.定制化

#### c.意大利面式的集成

#### d.在自己可控的平台进行定制化

#### e.绞杀者模式


## 五、分解单块系统

### 1.关键是接缝

### 2.分解MusicCorp

### 3.分解单块系统的原因

#### a.改变的速度

#### b.团队结构

#### c.安全

#### d.技术

### 4.杂乱的依赖

### 5.数据库

### 6.找到问题的关键

### 7.例子:打破外键关系

### 8.例子:共享静态数据

### 9.例子:共享数据

### 10.例子:共享表

### 11.重构数据库

### 12.事务边界

#### a.再试一次

#### b.终止整个操作

#### c.分布式事务

#### d.应该怎么办呢

### 13.报表

### 14.报表数据库

### 15.通过服务调用来获取数据

### 16.数据导出

### 17.事件数据导出

### 18.数据导出的备份

### 19.走向实时

### 20.修改的代价

### 21.理解根本原因


## 六、部署

### 1.持续集成简介

### 2.把持续集成映射到微服务

### 3.构建流水线和持续交付

### 4.平台特定的构建物

### 5.操作系统构建物

### 6.定制化镜像

#### a.将镜像作为构建物

#### b.不可变服务器

### 7.环境

### 8.服务配置

### 9.服务与主机之间的映射

#### a.单主机多服务

#### b.应用程序容器

#### c.每个主机一个服务

#### d.平台即服务

### 10.自动化

### 11.从物理机到虚拟机

#### a.传统的虚拟化技术

#### b.Vagrant

#### c.Linux容器

#### d.Docker

### 12.一个部署接口

## 七、测试

### 1.测试类型

### 2.测试范围

#### a.单元测试

#### b.服务测试

#### c.端到端测试

#### d.权衡

#### e.比例

### 3.实现服务测试

#### a.mock还是打桩

#### b.智能的打桩服务

### 4.微妙的端到端测试

### 5.端到端测试的缺点

### 6.脆弱的测试

#### a.谁来写这些测试

#### b.测试多长时间

#### c.大量的堆积

#### d.元版本

### 7.测试场景，而不是故事

### 8.拯救我们的消费者驱动的测试

#### a.Pact

#### b.关于沟通

### 9.还应该使用端到端测试吗

### 10.部署后再测试

#### a.区分部署和上线

#### b.金丝雀发布

#### c.平均修复时间胜过平均故障间隔时间

### 11.跨功能的测试

## 八、监控

### 1.单一服务，单一服务器

### 2.单一服务，多个服务器

### 3.多个服务，多个服务器

### 4.日志，日志，更多的日志

### 5.多个服务的指标跟踪

### 6.服务指标

### 7.综合监控

### 8.关联标识

### 9.级联

### 10.标准化

### 11.考虑受众

### 12.未来

## 九、安全

### 1.身份验证和授权

#### a.常见的单点登录实现

#### b.单点登录网关

#### c.细粒度的授权

### 2.服务间的身份验证和授权

#### a.在边界内允许一切

#### b.HTTP(S)基本身份验证

#### c.使用SAML或OpenID Connnect

#### d.客户端证书

#### e.HTTP之上的HMAC

#### f.API密钥

#### g.代理问题

### 3.静态数据的安全

#### a.使用众所周知的加密算法

#### b.一切皆与密钥相关

#### c.选择你的目标

#### d.按需解密

#### e.加密备份


### 4.深度防御

#### 1.防火墙

#### 2.日志

#### 3.入侵检测(和预防)系统

#### 4.网络隔离

#### 5.操作系统

### 5.一个示例

### 6.保持节俭

### 7.人的因素

### 8.黄金法则

### 9.内建安全

### 10.外部安全

## 十、康威定律和系统设计

### 1.证据

#### a.松耦合组织和紧耦合组织

#### b.Windows Vista

### 2.Netflix和Amazon

### 3.我们可以做什么

### 4.适应沟通途径

### 5.服务所有权

### 6.共享服务的原因

#### a.难以分割

#### b.特性团队

#### c.交付瓶颈

### 7.内部开源

#### a.守护者的角色

#### b.成熟

#### c.工具

### 8.限界上下文和团队结构

### 9.孤儿服务

### 10.案例研究:RealEstate.com.au

### 11.反向的康威定律

### 12.人

## 十一、规模化微服务

### 1.故障无处不在

### 2.多少是太多

### 3.功能降级

### 4.架构性安全措施

### 5.反脆弱的组织

#### a.超时

#### b.断路器

#### c.舱壁

#### d.隔离

### 6.幂等

### 7.扩展

#### a.更强大的主机

#### b.拆分负载

#### c.分散风险

#### d.负载均衡

#### d.基于worker的系统

#### e.重新设计

### 8.扩展数据库

#### a.服务的可用性和数据的持久性

#### b.扩展读取

#### c.扩展写操作

#### d.共享数据库基础设施

#### e.CQRS

### 9.缓存

#### a.客户端、代理和服务器端缓存

#### b.HTTP缓存

#### c.为写使用缓存

#### d.为弹性使用缓存

#### e.隐藏源服务

#### f.保持简单

#### g.缓存中毒:一个警示

### 10.自动伸缩

### 11.CAP定理

#### a.牺牲一致性

#### b.牺牲可用性

#### c.牺牲分区容忍性

#### d.AP还是CP

#### e。这不是全部或全不

#### f.真实世界

### 12.服务发现

### 13.动态服务注册

#### a.Zookeeper

#### b.Consul

#### c.Eureka

#### d.构造你自己的系统

#### e.别忘了人

### 14.文档服务

#### a.Swagger

#### b.HAL和HAL浏览器

### 15.自描述系统

## 十二、总结

### 1.微服务的原则

#### a.围绕业务概念建模

#### b.接受自动化文化

#### c.隐藏内部实现细节

#### d.让一切都去中心化

#### e.隔离失败

#### f.高度可观察

### 2.什么时候你不应该使用微服务

### 3.临别赠言












































